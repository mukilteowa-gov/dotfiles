unbind r
bind r source-file ~/.tmux.conf

set -g prefix C-s

# act like vim
setw -g mode-keys vi

# Enable mouse support
set -g mouse on

# Smart pane switching with awareness of Vim splits
# These work without prefix and detect if you're in vim/nvim
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"

# Backup navigation with prefix (C-s + h/j/k/l)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Clear screen rebind (since C-l is used for navigation)
bind C-l send-keys 'C-l'

# Window navigation shortcuts
bind-key 1 select-window -t 1
bind-key 2 select-window -t 2
bind-key 3 select-window -t 3
bind-key 4 select-window -t 4
bind-key 5 select-window -t 5
bind-key 6 select-window -t 6
bind-key 7 select-window -t 7
bind-key 8 select-window -t 8
bind-key 9 select-window -t 9

# Window management
bind-key n next-window
bind-key p previous-window
bind-key c new-window

# Session management
bind-key s choose-session
bind-key S new-session

# Start window and pane numbering at 1 (more intuitive than 0)
set -g base-index 1
setw -g pane-base-index 1

# Automatically renumber windows when one is closed
set -g renumber-windows on

# Set timezone for tmux
set-environment -g TZ 'America/Los_Angeles'

# Clipboard support - enable OSC 52 passthrough
set -g set-clipboard on
set -g allow-passthrough on

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'catppuccin/tmux'

set -g history-limit 100000
set -g detach-on-destroy off     # keep session alive if a pane dies

# Status bar configuration - move to top with minimal design
set -g status-position top
set -g status-interval 1
set -g status-style 'bg=default,fg=default'

# Center window list in status bar for wide monitors
set -g status-justify centre

# Catppuccin theme configuration
set -g @catppuccin_flavour 'mocha'

# Window display configuration - show all windows with better contrast
set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " ‚ñà"
set -g @catppuccin_window_number_position "left"

# Improved contrast - inactive windows darker, active much brighter
set -g @catppuccin_window_default_fill "none"
set -g @catppuccin_window_default_color "surface1"
set -g @catppuccin_window_default_text "#I:#W"

set -g @catppuccin_window_current_fill "all"
set -g @catppuccin_window_current_color "peach"
set -g @catppuccin_window_current_background "surface0"
set -g @catppuccin_window_current_text "#I:#W ‚ñ∂#{?window_zoomed_flag, üîç,}"

# Status modules configuration
set -g @catppuccin_status_modules_right "directory date_time session"
set -g @catppuccin_status_modules_left ""
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator " "
set -g @catppuccin_status_right_separator_inverse "no"
set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_connect_separator "no"

# Custom status content
set -g @catppuccin_directory_text "#{b:pane_current_path}"
set -g @catppuccin_date_time_text "%H:%M PDT"
set -g @catppuccin_session_text "#S"

# Window status settings for better visibility
set -g @catppuccin_window_status_enable "yes"
set -g @catppuccin_window_status_icon_enable "yes"

# Claude badge management hooks
# When switching TO a window, clear the badge
set-hook -g after-select-window 'run-shell "NAME=$(tmux display-message -p \"#W\" | sed \"s/ [üî¥‚úÖ‚ö°üí§]$//\"); tmux rename-window \"$NAME\""'

# Init TMUX tmp
run '~/.tmux/plugins/tpm/tpm'
